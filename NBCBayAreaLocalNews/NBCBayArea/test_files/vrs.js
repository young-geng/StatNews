_vrtrack=function(){},function(e,n){var t,r=e._vrq||[],o="http://t.visualrevenue.com/",i="http://t1.visualrevenue.com/",a=new Date,l=function(e,n){for(var t=r.length;t--;)if(r[t][0]==e)return"undefined"==typeof n?r[t][1]:(r[t][1]=n,void 0);"undefined"!=typeof n&&r.push([e,n])},u={poll_interval:50,timer:null,check_dom_tag:function(e,t){if(n.getElementsByTagName&&setTimeout){var r=n.getElementsByTagName(e);r&&r.length&&r.length>0?(clearTimeout(u.timer),t()):u.timer=setTimeout(function(){u.check_dom_tag(e,t)},u.poll_interval)}}},c=function(e,t,r){r=r||"";var o,i,a,l,u,c=n.getElementsByTagName("head");if(c)for(o=0,a=c.length;a>o;o++)if(u=c[o].getElementsByTagName(e))for(i=0,l=u.length;l>i;i++)if(u[i].getAttribute(t)&&(!r||r==u[i].getAttribute(t).toLowerCase()))return u[i];return null},f=function(e){if(e.indexOf("http://")>-1)return e;var t=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},r=n.createElement("div");return r.innerHTML='<a href="'+t(e)+'">x</a>',r.firstChild.href},s=function(){var e=c("meta","property","vr:canonical");if(e&&e.content)return f(e.content);var t=c("link","rel","canonical");if(t&&t.href)return f(t.href);var r=c("meta","property","og:url");return r&&r.content?f(r.content):n.location.href},d=function(){var e=l("refurl");return"undefined"==typeof e&&(e=n.referrer),_()&&(e=t),e},_=function(){if(!E)return!1;var e=c("meta","http-equiv","refresh"),n=null,r=null;return e&&e.content&&(n=decodeURIComponent(m("__vrrefresh")),r=parseInt(e.content.split(";")[0],0),r=Math.round(100*(r/60))/100+.1,h("__vrrefresh",encodeURIComponent(t),r,I),n===t)?!0:!1},v=function(){var e=c("meta","http-equiv","content-type");return e?(M=e.content.split("charset=")[1],M&&(M=M.split(";")[0]),M||(M=e.content.split(";")[1],M||(M=e.content))):(e=c("meta","charset",null),e&&(M=e.getAttribute("charset"))),l("charset",M),M},g=function(){var e={"co.uk":1,"co.il":1,"co.in":1,"co.ke":1,"co.ug":1,"com.my":1},t=n.location.hostname,r=t.split("."),o=null;return r.length>=2&&(o=r.slice(-2).join("."),e[o]&&(o=r.slice(-3).join("."))),o},m=function(e){var t,r=e+"=",o=n.cookie.split(";");for(t=0;t<o.length;t++){for(var i=o[t];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(r))return i.substring(r.length,i.length)}return null},h=function(e,t,r,o){var i;if(r){var a=new Date;a.setTime(a.getTime()+1e3*60*r),i="; expires="+a.toGMTString()}else i="";n.cookie=e+"="+t+i+"; path=/; domain=."+o},p=function(){var e,n,t,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");for(e=(new Date).getTime().toString(),t=0;32>t;t++)n=Math.floor(62*Math.random()),e+=r[n];return e},y=function(e){var n=new Image(1,1);n.src=e},T=function(e,t){t.id&&k(t.id);var r=n.createElement("script"),o=n.getElementsByTagName("script")[0];if(r.src=e,t.id&&(r.id=t.id),t.async&&(r.async=!0),t.onload){var i=!1;r.onload=r.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,t.onload(),r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r))}}o.parentNode.insertBefore(r,o)},k=function(e){var t=n.getElementById(e);if(t){t.parentNode.removeChild(t);try{for(var r in t)delete t[r]}catch(o){}}},w=function(e){if(!e)return e;var n,t=[];for(n=0;n<e.length;n++)e.charCodeAt(n)<128?t.push(e.charAt(n)):t.push(encodeURIComponent(e.charAt(n)));return encodeURIComponent(t.join(""))},q=function(e){return l("track_url",e.track_url),query="?idsite="+e.np,query+="&url="+e.track_url,query+="&seen_url="+e.seen_url,query+="&t="+e.title,query+="&c="+e.cookie,query+="&r="+e.timestamp,query+="&ypos="+e.ypos,query+="&debug="+e.debug,e.ref_url&&(query+="&refurl="+e.ref_url),e.ref_np&&(query+="&refnp="+e.ref_np),e.norm_ref_url&&(query+="&norm_refurl="+e.norm_ref_url),e.conversion_id&&(query+="&cv_id="+e.conversion_id),e.content_type&&(query+="&content_type="+e.content_type),e.no_cookies&&(query+="&no_cookies=true"),e.manual_ping&&(query+="&man=true"),e.mx&&(query+="&mx="+e.mx,query+="&my="+e.my,query+="&sw="+e.sw),query+="&v=09"},C=l("id"),E=!l("no_cookies"),z=m("__vrf"),I=g(),M=null,N=function(e){e=e||{};var r=encodeURIComponent(n.title),l=e.conversion_id,u=m("__vry")||-1;C=e.track_id||C;var c=m("__vrid");t=e.track_url||t;var f=e.ref_url,s=null;e.manual_ping?s=f:(s=m("__vru"),s&&(s=decodeURIComponent(s)));var d=m("__vrl");d=d?decodeURIComponent(d):e.seen_url||t;var _=m("__vrm"),v={};_&&(_=_.split("_"),v.x=_[0],v.y=_[1],v.screen_width=_[2]);var g=(new Date).getTime(),h=new Date-a,p=q({track_url:w(t),seen_url:w(d),ref_url:w(f),norm_ref_url:w(s),np:C,ref_np:c,title:r,cookie:z,debug:"loadTime."+h,timestamp:g,ypos:u,conversion_id:l,content_type:M,mx:v.x,my:v.y,sw:v.screen_width,no_cookies:!E,manual_ping:e.manual_ping});y(o+p),y(i+p),e.automate},b=function(e){e=e||{};var t=e.refurl?e.refurl:n.location.href;N({automate:!!e.automate,conversion_id:e.conversion_id,manual_ping:!0,ref_url:t,track_id:e.track_id,track_url:e.track_url})},L=function(e){return e&&e.tagName&&"a"===e.tagName.toLowerCase()},x=function(e){for(var n=4,t=null;e&&n--;){if(L(e)){t=e;break}e=e.parentNode}return t},A=function(e,n){if(!n||null==e)return-1;var t,r,o=-1;for(t=0,r=e.length;r>t;t++)if(e[t].href===n.href&&(o+=1),e[t]===n)return o;return-1},S=function(e,t,r){var o=function(e){e=e||event,r.apply(n,[e,e.target||e.srcElement])};n.addEventListener?e.addEventListener(t,o,!1):n.attachEvent&&e.attachEvent("on"+t,o)},B=function(){if(!l("no_cookies")){var e=null,r=n.getElementsByTagName("a");S(n,"mousedown",function(o,i){var a=x(i);if(a){var l=A(r,a);h("__vrl",encodeURIComponent(a.href),.4,I),h("__vry",l,.4,I),h("__vru",encodeURIComponent(t),.4,I),m("__vrrefresh")&&h("__vrrefresh",-1,.001,I),h("__vrid",C,.4,I),e=i}else h("__vrl",-1,.001,I),h("__vry",-1,.001,I);var u,c,f;o.pageX||o.pageY?(u=o.pageX,c=o.pageY):(o.clientX||o.clientY)&&(u=o.clientX+n.body.scrollLeft+n.documentElement.scrollLeft,c=o.clientY+n.body.scrollTop+n.documentElement.scrollTop),u&&(f=n.documentElement.clientWidth?n.documentElement.clientWidth:n.body.clientWidth,h("__vrm",u+"_"+c+"_"+f,.4,I))}),S(n,"mouseup",function(n,t){e&&t!==e&&(h("__vrl",-1,.001,I),h("__vry",-1,.001,I),h("__vrm",-1,.001,I)),e=null})}};e._vrtrack=b,E&&!z&&(z=p(),h("__vrf",z,30,I)),u.check_dom_tag("body",function(){t=s(),M=v(),N({ref_url:d(),seen_url:n.location.href})}),B();var j,r,S,l,c,f,s,m,T,k,H="http://p.visualrevenue.com/",R=50,D=50,U=function(){if(j&&console&&console.log){var e=Array.prototype.slice.apply(arguments),n=new Date,t="VR_S ";t+=(n.getMinutes()>9?n.getMinutes():"0"+n.getMinutes())+":",t+=(n.getSeconds()>9?n.getSeconds():"0"+n.getSeconds())+".",t+=n.getMilliseconds()>9?n.getMilliseconds()>99?n.getMilliseconds():"0"+n.getMilliseconds():"00"+n.getMilliseconds(),e.unshift(t),console.log(e.join(" "))}},G=function(){var e={};if(n.querySelectorAll){for(var t=n.querySelectorAll("*[data-vr-zone]"),r=0,o=t.length;o>r;r++){var i=t[r].getAttribute("data-vr-zone");e[i]?e[i].push(t[r]):e[i]=[t[r]]}return e}for(var a=n.all,r=0,o=a.length;o>r;r++){var l=a[r].getAttribute("data-vr-zone");l&&(e[l]?e[l].push(a[r]):e[l]=[a[r]])}return e},O=function(e,n,t){var r;return function(){var o=this,i=arguments,a=function(){t||e.apply(o,i),r=null};r?clearTimeout(r):t&&e.apply(o,i),r=setTimeout(a,n||100)}},X=function(e){return e.replace(/\s/g,"")},Y=function(){function e(e){return e&&"string"==typeof e&&(e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),t.innerHTML=e,t.innerText?(e=t.innerText,t.innerText=""):(e=t.textContent,t.textContent="")),unescape(e)}var t=n.createElement("div");return e}(),W=function(e,n){if(!e)return 0;var t,r=0,o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=e.substr(-n,n),a=i.length;for(t=0;a>t;t++)r=r+o.indexOf(i.charAt(t))+1;return r%n},F=function(e){var n=l("charset"),t="?transport="+e;return t+="&idsite="+l("id"),t+="&url="+(l("track_url")||s()),t+=n?"&content_type="+n:""},V=function(e){var n=H+F("jsonp"),t="callbackFn";n+="&callback=_vrq.jsonp."+t,r.jsonp={},r.jsonp[t]=e,T(n,{async:!0,id:"vr-script-002"})},J=function(e){U("Doing "+e.length+" headline test(s)");for(var n=W(m("__vrf"),2),t=G(),r=0,o=e.length;o>r;r++)K(e[r],t,n)},K=function(e,n,t){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");if(U("Cookie Split: "+r[t]),n[e.config.data_vr_zone]){var o=e.content.new_titles[t],i=e.content.current_title,a=e.content.new_images[t],l=e.content.current_image,u=[];e.config.winner&&(o=e.config.winner.title,a=e.config.winner.image,U("A winner was sent, so use that instead"));for(var c=0,f=n[e.config.data_vr_zone].length;f>c&&(u.push(Q(l,a,n[e.config.data_vr_zone][c],!1)),u.push(P(i,o,n[e.config.data_vr_zone][c],!1)),!u[0]&&!u[1]);c++);}else var s=20,d=setInterval(function(){if(n=G(),n[e.config.data_vr_zone])K(e,n,t);else{if(s>0)return s--,U("Tries left to find zone: "+s),void 0;U('data-vr-zone "'+e.config.data_vr_zone+'" was not found on the page')}clearInterval(d)},100)},P=function(e,t,r,o){if(!t||e==t)return U("Goal title is current title, do nothing"),!1;U("Searching for headline: "+e);for(var i,a=r.getElementsByTagName("a"),l=!1,u=X(Y(e)).toLowerCase(),c=0,f=a.length;f>c;c++)i=a[c].innerHTML,i.length>=e.length&&(i=X(Y(i)).toLowerCase(),i==u&&(l=!0,a[c].innerHTML=t,U("Headline found and replaced (anchor value)")));if(!l){if(n.getElementsByTagName){var s;for(c=0;f>c;c++){s=a[c].getElementsByTagName("*");for(var d=-1,_=s.length;++d<_;)child_html=s[d].innerHTML,child_html.length>=e.length/2&&(child_html=X(Y(child_html)).toLowerCase(),child_html==u&&(l=!0,s[d].innerHTML=t,U("Headline found and replaced (child value)")))}}l||o||(U("Headline not found"),D>0?(setTimeout(function(){P(e,t,r,!1),U("Tries left to find headline: "+D)},100),D--):U("Headline not found in zone"))}return l&&!o&&Z(P,e,t,r),l},Q=function(e,n,t,r){if(!n||e==n)return U("Goal image is current image, do nothing"),!1;U("Searching for image: "+e);for(var o,i=t.getElementsByTagName("img"),a=!1,l=0,u=i.length;u>l;l++)o=i[l].src,o==e&&(a=!0,i[l].src=n,U("Image found and replaced"));return a||r||(U("Image not found"),R>0?(setTimeout(function(){Q(e,n,t,!1),U("Tries left to find image: "+R)},100),R--):U("Image not found in zone")),a&&!r&&Z(Q,e,n,t),a},Z=function(e,n,t,r){var o=O(function(r){setTimeout(function(){e.call(e,n,t,r.relatedNode,!0)},1)},50,!0);S(r,"DOMNodeInserted",o)},$=function(n,t){if(n.config.manip_test&&"#vr-test-modules"!=e.location.hash)return!1;if(t[n.config.container_zone])t[n.config.container_zone][0].innerHTML=n.served_html,U("Container zone found, loading module");else var r=30,o=setInterval(function(){var e=G();if(e[n.config.container_zone])e[n.config.container_zone][0].innerHTML=n.served_html,U("Container zone found, loading module");else{if(r>0)return r--,U("Tries left to find zone: "+r),void 0;U('data-vr-zone "'+n.config.container_zone+'" was not found on the page')}clearInterval(o)},100)},en=function(e){U("Doing "+e.length+" module(s)");for(var n=G(),t=0,r=e.length;r>t;t++)$(e[t],n)},nn=function(e){for(var n=[],t=[],r=0;r<e.length;r++)"content_test"==e[r].type?n.push(e[r]):"automation_module"==e[r].type&&t.push(e[r]);en(t),J(n)},tn=function(){j=m("vr_js_log");var e=l("serving_tasks");l("transport"),e?(U("Inline serving tasks"),nn(e)):(U("Get serving tasks (jsonp)"),V(nn))};l("automate")&&tn()}(window,document);